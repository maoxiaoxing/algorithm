<script type="module">
  import { data } from "./data.js"
  import { getType } from '../../utils/utils.js'

  console.log(data)
  const deepCopy = (_obj) => {
    const dfs = (obj, map = new WeakMap()) => {
      if (getType(obj) === 'null') return obj
      if (getType(obj) === 'regexp') return new RegExp(obj)
      if (getType(obj) === 'date') return new Date(obj)
      if (typeof obj !== 'object') return obj

      if (map.has(obj)) return map.get(obj)

      const cloneObj = new obj.constructor()
      map.set(obj, cloneObj)

      for (const key in obj) {
        if (obj.hasOwnProperty(key)) {
          cloneObj[key] = deepCopy(obj[key], map)
        }
      }
      return cloneObj
    }
    return dfs(_obj)
  }

  console.log(deepCopy(data))
</script>


